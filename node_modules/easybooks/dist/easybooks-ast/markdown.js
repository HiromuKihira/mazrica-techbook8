"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const unified_1 = __importDefault(require("unified"));
const remark_parse_1 = __importDefault(require("remark-parse"));
const remark_math_1 = __importDefault(require("remark-math"));
const remark_highlight_js_1 = __importDefault(require("remark-highlight.js"));
const remark_breaks_1 = __importDefault(require("remark-breaks"));
const remark_html_katex_1 = __importDefault(require("remark-html-katex"));
const remark_html_1 = __importDefault(require("remark-html"));
const remark_frontmatter_1 = __importDefault(require("remark-frontmatter"));
const remark_stringify_1 = __importDefault(require("remark-stringify"));
const md_to_eb_1 = __importDefault(require("./md-to-eb"));
const import_source_1 = __importDefault(require("./import-source"));
exports.markdown = unified_1.default()
    .data('settings', { footnotes: true, gfm: true })
    .use(remark_parse_1.default)
    .use(remark_breaks_1.default)
    .use(remark_math_1.default)
    .use(remark_html_katex_1.default)
    .use(remark_highlight_js_1.default)
    .use(remark_frontmatter_1.default, ['yaml'])
    .use(remark_stringify_1.default);
const toEb = unified_1.default().use(md_to_eb_1.default);
const is = unified_1.default().use(import_source_1.default);
exports.importSource = async (node) => {
    await is.run(node);
};
exports.parseMarkdown = async (vfile) => {
    const md = exports.markdown.parse(vfile);
    await toEb.run(md);
    return md;
};
exports.stringifyHtml = (node, vfile) => unified_1.default()
    .use(remark_html_1.default)
    .stringify(node, vfile);
exports.stringifyMarkdown = (node, vfile) => exports.markdown.stringify(node, vfile);
//# sourceMappingURL=markdown.js.map